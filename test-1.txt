print("Hello")
msg = input("Enter your message")

GITHUB_TOKEN = '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'
gist_id = '227c7b43a1d23c50412a77a1a70b44ff'
filename = 'message.txt'
new_message = "\nHello again!"

headers = {
    'Authorization': f'token {GITHUB_TOKEN}',
    'Accept': 'application/vnd.github.v3+json'
}

# Step 1: Get existing content
response = requests.get(f'https://api.github.com/gists/{gist_id}', headers=headers)

if response.status_code == 200:
    gist_data = response.json()
    current_content = gist_data['files'][filename]['content']
    updated_content = current_content + new_message

    # Step 2: Update gist with appended content
    update_data = {
        "files": {
            filename: {
                "content": updated_content
            }
        }
    }
    update_response = requests.patch(f'https://api.github.com/gists/{gist_id}', headers=headers, json=update_data)

    if update_response.status_code == 200:
        print("✅ Message Sent !")
    else:
        print("❌ Failed ", update_response.status_code, update_response.text)
else:
    print("❌ Failed ", response.status_code, response.text)

